version: '3.8'
services:
  consul:
      build:
        context: ./consul
        dockerfile: Dockerfile
      container_name: consul
      networks:
        - app-network
      ports:
        - "8500:8500"
        - "8600:8600/tcp"
        - "8600:8600/udp"
      command: agent -server -ui -node=server-1 -bootstrap-expect=1 -client=0.0.0.0 -config-file=/consul/config/config.json

  onboarding:
    restart: always
    build:
      context: onboarding-service
      dockerfile: Dockerfile
    container_name: onboarding-service
    networks:
        - app-network
    ports: 
      - "5001:5001"
    depends_on:
      - consul

networks:
  app-network:
    driver: bridge